// app global css in Sass form
@use "sass:color"

// body.body--dark
//   // background-color: $grey-10!important
//   background-color: transparent !important
// .bg-dark
//   background-color: black !important
// .body--dark
//   background-color: black !important
//   // background-color: $grey-10 !important
.q-dialog__backdrop
  background: rgba(35, 35, 35, 0.8) !important
  backdrop-filter: blur(5px)
// .q-page-container
//   background-color: black !important
p
  font-size: 18px
  margin-bottom: 0px
  color: white
  text-align: left
h1
  // font-size: 75px
  font-size: clamp(70px, 1.5vw, 75px)
  margin: 0px
  font-family: Poppins
  color: white
h2
  font-size: 30px
  margin: 0px
  font-family: Poppins
  color: white
h3
  font-size: 25px
  margin: 0px
  margin-bottom: 0px
  font-family: Poppins
  line-height: thin
  color: white
h4
  margin-top: 0px
  margin-bottom: 0px
  font-size: 22px
  font-family: Poppins
  color: white
h5
  margin-top: 0px
  margin-bottom: 0px
  font-size: 18px
  font-weight: 200
  font-family: BwNista-Light
  color: white
h6
  margin: 0px
  font-size: 14px
  font-weight: 200
  font-family: Poppins
  color: white
.shadowsfont
  font-family: shadows
.pwinput
  font-size: 40px
.greenMsg
  color: $green
.redMsg
  color: $red
.outlined
  outline: 1.4px solid rgba(221, 221, 221, 0.61)
.q-input .q-field__native
  font-size: 18px
  padding-left: 10px
  padding-right: 10px
.create-btn
  border-top-left-radius: 0
  border-bottom-left-radius: 0
  border-top-right-radius: 16px
  border-bottom-right-radius: 16px
  margin-left: -1px
.create-input
  border-top-left-radius: 16px
  border-bottom-left-radius: 16px
  border-top-right-radius: 0
  border-bottom-right-radius: 0
  margin-left: -1px
textarea
  white-space: normal
  overflow-wrap: break-word
  font-size: 1.2rem
  width: 100%
  line-height: 1.5 !important
.q-card--bordered
  // outline: 2px solid $pink-2
  // outline-style: linear-gradient(to bottom, $pink-2,rgba(0, 0, 0, 0)) 1 100%
  // border-width: 3px
  // border-style: solid
.q-separator--horizontal
  height: 2px
  background-color: rgba(0, 0, 0, 0.12)
.q-card
  border-radius: 14px
  // box-shadow: 0px 1px 15px $grey-10 !important
  // backdrop-filter: blur(25px)
  background-color: $grey-10
.faded-out
  opacity: 0.2
  pointer-events: none
  transition: opacity 0.3s ease
.q-btn
  // border: .1px solid #027be3
  // border-radius: 18px
  // outline: none
  // border: 2px solid $grey-5
  // background-color: rgba(1,1,1,.5)
  // color: white
.q-item
  // background-color: rgba(1,1,1,.5)
  color: white
// .q-list
//   background-color: rgba(1,1,1,.4)
.centered
  justify-content: center
  display: flex
  flex-wrap: wrap
.header-art
  background: url('ui/header.webp')
  background-size: cover
  color: white
.toggle
  border: 2px solid #027be3

body.body--dark
  background: #1a3d67
.q-tab__label
  font-size: 13px
.q-btn
  font-size: 13px
.q-menu
  border-radius: 24px
  background-color: rgba(43, 43, 43, .6)
  box-shadow: 0px 1px 5px $grey-10 !important
  text-transform: capitalize
  backdrop-filter: blur(5px)


@font-face
  font-family: BwNista-Regular
  src: url(/fonts/BwNista-Regular.otf)
@font-face
  font-family: BwNista-Light
  src: url(/fonts/BwNista-Light.otf)
@font-face
  font-family: BwNista-Bold
  src: url(/fonts/BwNista-Bold.otf)
@font-face
  font-family: Poppins
  src: url(/fonts/Poppins-Regular.ttf)
@font-face
  font-family: shadows
  src: url(/fonts/shadows.ttf)
@font-face
  font-family: right
  src: url(/fonts/right.ttf)
@font-face
  font-family: gluten
  src: url(/fonts/gluten.ttf)

.bridge-box
  background: linear-gradient(90deg, rgba(0,0,0,.3) 0%,rgba(0,0,0,0) 33%,rgba(0,0,0,0) 66%,rgba(0,0,0,.3) 100% )
  border-radius: 8px
.warn-box
  background: linear-gradient(90deg, rgba($amber, 0.4) 0%,rgba(0,0,0,0) 50%,rgba($amber,.4) 100% )
  border-radius: 8px

.outline-box
  border: 2px solid rgba($blue-4,.8)
  border-radius: 8px
  background: linear-gradient(90deg, rgba(0,0,0,.1) 0%,rgba(0,0,0,.1) 50%,rgba(0,0,0,.1) 100% )

.selected-box
  outline: 4px solid rgba($secondary,1)
  background: color.adjust($secondary, $alpha: -0.95)

  .q-field__input
    color: $pink

input[type="number"]
  &::-webkit-outer-spin-button
    -webkit-appearance: none
    margin: 0

  &::-webkit-inner-spin-button
    -webkit-appearance: none
    margin: 0

    -moz-appearance: textfield

.q-menu
  .q-item__label
    font-size: 18px

// --- Global image fallback handling ---
// Hide broken/missing image chrome and outlines without collapsing layout
img
  border: none !important
  outline: none !important

// When src is empty or missing, don't render UA broken icon
img[src=""], img:not([src]), img[src=" "]
  opacity: 0 !important
  border: none !important
  outline: none !important

// Any image that failed to load (class set in boot script)
img.img-load-error, .q-img__image.img-load-error
  opacity: 0 !important
  border: none !important
  outline: none !important

// Telegram Mini App mode tweaks
// Note: the boot/tma.ts sets html.tma-mode when we positively detect TMA
html.tma-mode
  // Use the real Telegram visible viewport height if available
  min-height: var(--tg-viewport-height, 100dvh)
  height: var(--tg-viewport-height, 100dvh)

  body
    min-height: var(--tg-viewport-height, 100dvh)
    height: auto

  .q-layout, .q-page-container, .q-page
    min-height: var(--tg-viewport-height, 100dvh)

  .q-page
    // Respect bottom safe-area on iOS Telegram
    padding-bottom: env(safe-area-inset-bottom, 0px)

  // Optional: use Telegram background color if provided (set in tma.ts)
  background-color: var(--tma-bg, #121212)


// Global guards to avoid accidental horizontal overflow, especially on mobile/TMA
html, body
  max-width: 100vw
  overflow-x: hidden

.q-layout, .q-page-container, .q-page
  max-width: 100vw
  overflow-x: clip

// Flex children should be allowed to shrink to avoid flex-induced overflow
.centered > *
  min-width: 0

// Improve readability of badges/chips globally
.q-badge, .q-chip
  font-size: 14px
  line-height: 1.2
  padding: 6px 10px
  border-radius: 8px
  font-weight: 600

// Make outlined variants readable on dark backgrounds
body.body--dark
  .q-badge--outline, .q-chip--outline
    border-color: rgba(255, 255, 255, 0.35) !important
    color: #ffffff !important

// Ensure grey badges have sufficient text contrast in dark mode
body.body--dark
  .q-badge.bg-grey-7, .q-badge.bg-grey-8,
  .q-chip.bg-grey-7, .q-chip.bg-grey-8
    color: #ffffff !important
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08)

// Utility darker panel used in places like settings
.bg-dark-2
  background-color: #2b2b2b !important
  border: 1px solid rgba(255,255,255,0.06)
  border-radius: 10px
.badge
  width: 32px
  height: 32px
  background-color: black
  border-radius: 50%
  position: absolute
  z-index: 5
  pointer-events: none
  top: -16px
  right: -16px
  font-size: 12px
  border: 1px solid transparent

  background-image: linear-gradient(color.adjust(black, $alpha: -0.2),color.adjust(black, $alpha: -0.6)), linear-gradient(45deg, $secondary, $primary)
  background-origin: border-box
  background-clip: padding-box, border-box
  display: flex
  justify-content: center
  align-items: center

  p
    font-size: 16px
    margin: 0
    padding: 0
    text-align: center
    font-weight: 800
    // color:$primary

.badge-lg
  @extend .badge
  min-width: 41px
  height: 42px
  padding: 0 8px
  font-size: 16px
  top: -20px
  right: -20px

.badge-sm
  @extend .badge
  font-size: 12px
  width: 24px
  height: 24px

a
  color: #1a73e8
a:hover
  color: #ff6347
a:visited
  color: #6a5acd
.search-bar
  // Avoid 100vw to prevent horizontal overflow on mobile/Telegram webview
  width: 100%
  backdrop-filter: blur(20px)
  background-color: rgba(0, 0, 0, 0.25)
  position: fixed
  z-index: 100
  height: auto
  left: 0
  right: 0
.blur-bg
  backdrop-filter: blur(20px)
  background-color: rgba(0, 0,0, 0.25)
  position: fixed
  z-index: 100
.bg-blur
  backdrop-filter: blur(20px)
  background-color: rgba(0, 0,0, 0.25)
.bg-blur-light
  backdrop-filter: blur(10px)
  background-color: rgba(230, 230, 230, 0.023)
.bg-blur-lite
  backdrop-filter: blur(5px)
  background-color: rgba(230, 230, 230, 0.023)


.lobster-font
  font-family: 'Lobster', serif
.q-btn__content
  text-shadow: 0 1px 10px rgba(0, 0, 0, 0.5)
.disabled
  opacity: 0.5
  pointer-events: none
  filter: grayscale(100%)
  user-select: none

// Floating Action Button positions (mobile create/magic mirror)
.fab-create
  position: fixed
  right: 16px
  // Lift above mobile footer nav
  bottom: calc(env(safe-area-inset-bottom, 0px) + 96px)
  z-index: 2100

.fab-mm
  position: fixed
  right: 16px
  // Stack above the Create FAB
  bottom: calc(env(safe-area-inset-bottom, 0px) + 164px)
  z-index: 2100

@font-face
  font-family: 'Lobster'
  src: url(/fonts/Lobster-Regular.ttf)

.chip-strip
  display: flex
  gap: 16px
  overflow-x: auto
  overflow-y: hidden
  padding-inline: 10vw 10vw
  scrollbar-width: none
  -ms-overflow-style: none
  &::-webkit-scrollbar
    display: none

.tag-pill
  flex: 0 0 auto
  height: 35px
  padding: 0 16px
  border: 0
  border-radius: 18px
  background: #2b2b2b
  color: #fff
  font: inherit
  line-height: 35px
  cursor: pointer
  white-space: nowrap
  /* kill default focus junk */
  outline: 0
  &:focus-visible
    outline: 0
  &.active
    background: var(--q-accent, #f66)
    color: #000
.r-sm
  border-radius: 4px
.r-md
  border-radius: 8px
.r-lg
  border-radius: 16px
.r-xl
  border-radius: 24px
.r-xxl
  border-radius: 32px
.r-full
  border-radius: 50%
.r-square
  border-radius: 0
